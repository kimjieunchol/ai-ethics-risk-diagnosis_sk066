RISK_ASSESSMENT_PROMPT = """당신은 AI 윤리 리스크 평가 전문가입니다.

# 평가 대상 서비스
{service_name}

# 서비스 분석 정보
{service_analysis}

# 평가 차원
{dimension} ({dimension_description})

# 가이드라인 기준
{guideline_context}

# 평가 기준
다음 기준에 따라 1-5점으로 평가해주세요:
- 5점: 매우 낮은 리스크 - 양호한 수준
- 4점: 낮은 리스크 - 장기적 모니터링 필요
- 3점: 중간 리스크 - 중기적 개선 권장
- 2점: 높은 리스크 - 단기적 개선 필요
- 1점: 매우 높은 리스크 - 즉각적인 개선 필요

# 평가 항목 ({dimension})
{evaluation_criteria}

# 평가 수행
위의 가이드라인과 수집된 정보를 바탕으로 평가를 수행하고, 다음 형식으로 출력해주세요:

{{
  "score": 평가점수(1-5),
  "risk_level": "리스크 수준 (매우 높음/높음/중간/낮음/매우 낮음)",
  "description": "평가 근거 상세 설명 (2-3문단)",
  "evidence": [
    "근거1: 구체적인 사실이나 발견사항",
    "근거2: 구체적인 사실이나 발견사항",
    "근거3: 구체적인 사실이나 발견사항"
  ],
  "guideline_compliance": {{
    "EU AI Act": "준수 여부 및 설명",
    "UNESCO": "준수 여부 및 설명",
    "OECD": "준수 여부 및 설명"
  }}
}}

평가를 시작하세요:"""

DIMENSION_CRITERIA_MAP = {
    "bias": """
1. 학습 데이터의 다양성과 대표성
   - 다양한 인구 집단을 균형있게 포함하는가?
   - 소수 집단이 과소 대표되지 않았는가?

2. 소수 집단에 대한 성능 격차
   - 특정 성별, 인종, 연령대에서 성능 차이가 있는가?
   - 성능 격차에 대한 모니터링이 이루어지는가?

3. 편향 완화 메커니즘
   - 편향을 감지하고 완화하는 기술적 장치가 있는가?
   - 정기적인 편향성 테스트가 실시되는가?

4. 공정성 보장 노력
   - 공정성 관련 명시적인 정책이나 가이드라인이 있는가?
""",
    "privacy": """
1. 개인정보 수집의 적절성
   - 서비스 제공에 필수적인 정보만 수집하는가?
   - 수집 목적이 명확하게 고지되는가?

2. 데이터 보안 조치
   - 암호화, 접근 제어 등 보안 조치가 충분한가?
   - 데이터 유출 사고 이력은 없는가?

3. 사용자 동의 프로세스
   - 명확하고 이해하기 쉬운 동의 절차가 있는가?
   - 사용자가 동의를 철회할 수 있는가?

4. 데이터 권리 보장
   - 사용자의 데이터 접근, 수정, 삭제 권한이 보장되는가?
   - GDPR 등 개인정보 보호 규정을 준수하는가?
""",
    "transparency": """
1. AI 시스템 작동 원리 공개
   - 어떤 기술이 사용되는지 공개하는가?
   - 의사결정 과정이 설명되는가?

2. 설명 가능성
   - 출력 결과에 대한 설명을 제공하는가?
   - 사용자가 AI의 결정을 이해할 수 있는가?

3. 정보 제공의 충분성
   - 서비스 한계와 위험성을 명확히 고지하는가?
   - 사용자 가이드나 문서가 충분한가?

4. 감사 가능성
   - 외부 감사나 평가가 가능한 구조인가?
   - 알고리즘 투명성 보고서를 제공하는가?
""",
    "accountability": """
1. 책임 소재의 명확성
   - AI 오류나 피해 발생 시 책임자가 명확한가?
   - 책임 체계가 문서화되어 있는가?

2. 피해 구제 메커니즘
   - 사용자 불만이나 피해 신고 창구가 있는가?
   - 실제로 피해 구제가 이루어지는가?

3. 윤리 거버넌스
   - AI 윤리 위원회나 관리 조직이 있는가?
   - 윤리 정책이 실제로 운영되는가?

4. 영향 평가
   - 정기적인 AI 영향 평가가 실시되는가?
   - 평가 결과가 서비스 개선에 반영되는가?
"""
}